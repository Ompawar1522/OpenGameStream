<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:OGS.ViewModels"
        xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
        xmlns:views1="clr-namespace:OGS.Views"
        x:Class="OGS.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/ogs.png"
		Width="800" Height="450" CanResize="False"
		Foreground="White"
        Title="{Binding Version, StringFormat='OpenGameStream ({0})'}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>
	
	<Grid Background="#272727" ColumnDefinitions="1*, 0.3*" RowDefinitions="*, auto">
		<Grid Background="#161616" Margin="10, 10, 10, 5" ColumnDefinitions="1*, 1*" RowDefinitions="1*, 1*" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
			<ContentControl Margin="5" Content="{Binding QuickSwitchControl}"/>

			<Border Margin="5" Grid.Row="0" Grid.Column="1" BorderBrush="Gray" BorderThickness="1">
				<ContentControl Background="Black" Content="{Binding PreviewControl}"/>
			</Border>

			<ScrollViewer Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0" Name="logScrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible" Background="#111111" Margin="8, 8, 8, 0">
				<ItemsControl Padding="0, 0, 0, 5" ItemsSource="{Binding LogEntries}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding}" Focusable="True" TextWrapping="Wrap" LineSpacing="0" Height="16" FontSize="13" VerticalAlignment="Center"/>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>
		</Grid>

		<Grid Grid.Column="1" Grid.RowSpan="2" RowDefinitions="*, auto" Margin="0, 10, 10, 5">
			<views1:ClientListView Grid.Row="0"/>
			
			<Grid ColumnDefinitions="*, auto" Grid.Row="1" Margin="0, 5, 0, 0" >
				<Button Height="30" Content="Create client"
								Command="{Binding CreateClientCommand}"
				                HorizontalAlignment="Stretch"
				                HorizontalContentAlignment="Center"
				                VerticalAlignment="Center"
				                VerticalContentAlignment="Center">
				</Button>

				<Button VerticalAlignment="Center"  Height="30" IsEnabled="True" Grid.Column="1" Margin="3, 0, 0, 0">
					<avalonia:MaterialIcon Kind="Settings" />
					
					<Button.Flyout>
						<MenuFlyout>
							<MenuItem Header="Capture settings" Command="{Binding ShowCaptureSettingsCommand}"/>
							<MenuItem Header="Client settings" Command="{Binding ShowClientSettingsCommand}"/>
							<Separator/>
							<MenuItem Header="Restore defaults" Command="{Binding RestoreDefaultConfigCommand}"/>
						</MenuFlyout>
					</Button.Flyout>
				</Button>
			</Grid>
		</Grid>
		<Panel Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="1" Margin="10, 0, 10, 5" Background="#111111">
			<StackPanel Orientation="Horizontal" Margin="0, 0, 0, 0" HorizontalAlignment="Center">
				<HyperlinkButton Click="ClientUrlClicked" FontSize="10" Foreground="White" Content="{Binding WebClientUrl, StringFormat='Client url: {0} (click to copy)'}" HorizontalAlignment="Center"/>
			</StackPanel>
		</Panel>
	</Grid>
</Window>
